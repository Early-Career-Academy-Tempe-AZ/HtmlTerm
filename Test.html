<html>
<head>
    <title>HtmlTerm Test</title>

    <script type="text/javascript">
        // Change these settings below to configure the look/behaviour of fTelnet
        var ClientVars = {};

        // Override any defaults here (for testing)
        ClientVars.WebSocketHostName = "sbbs.ftelnet.ca";
    </script>

    <script type="text/javascript" src="Source/ImpliedGlobals.js"></script>
    <script type="text/javascript" src="Source/randm/actionscript/ByteArray.js"></script>
    <script type="text/javascript" src="Source/randm/actionscript/FileReference.js"></script>
    <script type="text/javascript" src="Source/randm/actionscript/Keyboard.js"></script>
    <script type="text/javascript" src="Source/randm/actionscript/Point.js"></script>
    <script type="text/javascript" src="Source/Connect.ans.js"></script>
    <script type="text/javascript" src="Source/Helper.js"></script>
    <script type="text/javascript" src="Source/StringUtils.js"></script>
    <script type="text/javascript" src="Source/client/connectbutton/TConnectButton.js"></script>
    <script type="text/javascript" src="Source/client/savefilesbutton/TSaveFilesButton.js"></script>
    <script type="text/javascript" src="Source/randm/crt/cursor/BlinkState.js"></script>
    <script type="text/javascript" src="Source/randm/crt/cursor/TCursor.js"></script>
    <script type="text/javascript" src="Source/randm/crt/font/TFont.js"></script>
    <script type="text/javascript" src="Source/randm/crt/KeyPressEvent.js"></script>
    <script type="text/javascript" src="Source/randm/crt/Crt.js"></script>
    <script type="text/javascript" src="Source/randm/ansi/AnsiParserState.js"></script>
    <script type="text/javascript" src="Source/randm/ansi/ESCQEvent.js"></script>
    <script type="text/javascript" src="Source/randm/ansi/Ansi.js"></script>
    <script type="text/javascript" src="Source/randm/tcp/TTelnet.js"></script>
    <script type="text/javascript" src="Source/randm/xfer/CRC.js"></script>
    <script type="text/javascript" src="Source/randm/xfer/TFileRecord.js"></script>
    <script type="text/javascript" src="Source/randm/xfer/TYModemReceive.js"></script>
    <script type="text/javascript" src="Source/HtmlTerm.js"></script>

    <!--<script type="text/javascript" src="Release/HtmlTerm.compiled.js"></script>-->
    <script type="text/javascript" src="Release/HtmlTerm.font2.js"></script>
    <script type="text/javascript" src="Release/HtmlTerm.fontamiga.js"></script>
    <script type="text/javascript" src="Release/HtmlTerm.fontatari.js"></script>

    <script type="text/javascript" src="FileSaver.js"></script>
</head>
<body>
    <p id="ClientContainer" style="text-align: center;"></p>

    <script type="text/javascript">
        HtmlTerm.Init("ClientContainer", ClientVars);
    </script>

    <a href="javascript:Crt.SetFont('437', 12, 23);">12x23</a> <a href="javascript:Crt.SetFont('Topaz', 8, 11);">Topaz</a> <a href="javascript:HtmlTerm.Download();">Start YModem-G based download</a>

    <p>&nbsp;</p>

    Download: <a href="javascript:Download();">Save test_file.txt</a>
    <script type="text/javascript">
        function Download() {
            var myBlob = new Blob(["Lorem ipsum"], { "type": "text\/plain" });
            var fileSaver = window.saveAs(myBlob, "test_file.txt");
            //fileSaver.onwriteend = myOnWriteEnd;
        }
    </script>

    <p>&nbsp;</p>

    Upload:
    <input type="file" id="fuUpload" name="fuUpload[]" multiple />
    <output id="list"></output>

    <script>
        function handleFileSelect(evt) {
            var files = evt.target.files; // FileList object

            // Loop through the FileList and render image files as thumbnails.
            for (var i = 0, f; f = files[i]; i++) {

                var reader = new FileReader();

                // Closure to capture the file information.
                reader.onload = (function (theFile) {
                    return function (e) {
                        // Render thumbnail.
                        var pre = document.createElement('pre');
                        pre.innerHTML = "Filename: " + theFile.name + "\r\n" + "Filesize: " + theFile.size + " bytes\r\nContent:\r\n" + e.target.result;
                        document.getElementById('list').insertBefore(pre, null);
                    };
                })(f);

                // Read in the image file as a data URL.
                reader.readAsBinaryString(f);
            }
        }

        document.getElementById('fuUpload').addEventListener('change', handleFileSelect, false);
    </script>
</body>
</html>
